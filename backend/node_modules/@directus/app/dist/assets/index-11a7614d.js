import{T as Ve,w as $e,a as We,v as Ue}from"./vue.runtime.esm-bundler-af75f279.js";import{f as Te,u as Me,h as Ce,_ as j,j as ye,k as re,l as we,n as Ee,M as Le,o as de,t as Oe,q as je,v as Re,w as Ae,x as Fe,S as qe,y as ze,z as Se,A as He,B as Ge,C as Pe,D as Ze,E as Ke,F as Qe,V as xe,H as Je}from"./index.2a491b91.entry.js";import{u as Xe,a as Ye,b as et}from"./index-3fb59446.js";import{storeToRefs as _e}from"./pinia.85ecdc47.entry.js";import{useI18n as le}from"./vue-i18n.0b092b2f.entry.js";import{useRouter as Ne}from"./vue-router.60d75471.entry.js";import{d as R,c as w,e as $,be as ke,w as oe,a$ as _,b0 as ne,bt as A,aS as a,a7 as h,br as l,a9 as x,H as ae,j as i,a8 as D,aa as B,aH as L,b1 as Be,u as d,ae as O,ba as U,aZ as se,az as tt,a_ as K,aG as ot,n as nt,p as at,ac as st,aI as lt,ar as it,aV as rt,aT as ct}from"./runtime-core.esm-bundler-474556af.js";const ut=["src"],dt=R({__name:"module-bar-logo",setup(g){const{t:e}=le(),u=Te(),n=Me(),t=w(()=>{var m;return n.settings===null||!((m=n.settings)!=null&&m.project_logo)?null:`${Ce()}assets/${n.settings.project_logo}`}),o=$(!1),{queueHasItems:c}=ke(u);oe(()=>c.value,m=>{m&&(o.value=!0)});const s=w(()=>{var m;return(m=n.settings)==null?void 0:m.project_url}),v=w(()=>{var m;return(m=n.settings)!=null&&m.project_url?e("view_project"):!1});function p(){c.value===!1&&(o.value=!1)}return(m,N)=>{const M=_("v-progress-linear"),b=ne("tooltip");return A((a(),h(Be(s.value?"a":"div"),{href:s.value,target:s.value?"_blank":void 0,rel:s.value?"noopener noreferrer":void 0,class:L(["module-bar-logo",{loading:o.value}])},{default:l(()=>[t.value?(a(),x(ae,{key:0},[i(Ve,{name:"fade"},{default:l(()=>[o.value?(a(),h(M,{key:0,indeterminate:"",rounded:"",onAnimationiteration:p})):D("",!0)]),_:1}),B("img",{class:"custom-logo",src:t.value,alt:"Project Logo"},null,8,ut)],64)):(a(),x("div",{key:1,class:L(["logo",{running:o.value}]),onAnimationiteration:p},null,34))]),_:1},8,["href","target","rel","class"])),[[b,v.value,void 0,{right:!0}]])}}});const _t=j(dt,[["__scopeId","data-v-c5931858"]]),vt={class:"module-bar-avatar"},pt=["src","alt"],mt=R({__name:"module-bar-avatar",setup(g){const{t:e}=le(),u=ye(),n=re(),{notificationsDrawerOpen:t}=_e(u),{unread:o}=_e(n),c=we(),s=$(!1),v=w(()=>{var b;return!c.currentUser||!("avatar"in c.currentUser)||!((b=c.currentUser)!=null&&b.avatar)?null:Ee(`${Ce()}assets/${c.currentUser.avatar.id}?key=system-medium-cover`)}),p=$(null),m=w(()=>`/users/${c.currentUser.id}`),N=w(()=>"/logout"),M=c.fullName??void 0;return(b,V)=>{const W=_("v-icon"),T=_("v-button"),E=_("v-badge"),Q=_("v-card-title"),ie=_("v-card-actions"),J=_("v-card"),X=_("v-dialog"),P=_("v-avatar"),Y=_("router-link"),ee=_("v-hover"),F=ne("tooltip");return a(),x("div",vt,[i(E,{value:d(o),disabled:d(o)==0,class:"notifications-badge"},{default:l(()=>[A((a(),h(T,{tile:"",icon:"","x-large":"",class:"notifications",onClick:V[0]||(V[0]=H=>t.value=!0)},{default:l(()=>[i(W,{name:"notifications"})]),_:1})),[[F,d(e)("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),i(ee,null,{default:l(({hover:H})=>[i(X,{modelValue:s.value,"onUpdate:modelValue":V[2]||(V[2]=q=>s.value=q),onEsc:V[3]||(V[3]=q=>s.value=!1)},{activator:l(({on:q})=>[i(Ve,{name:"sign-out"},{default:l(()=>[H?A((a(),h(T,{key:0,tile:"",icon:"","x-large":"",class:"sign-out",onClick:q},{default:l(()=>[i(W,{name:"logout"})]),_:2},1032,["onClick"])),[[F,d(e)("sign_out"),void 0,{right:!0}]]):D("",!0)]),_:2},1024)]),default:l(()=>[i(J,null,{default:l(()=>[i(Q,null,{default:l(()=>[O(U(d(e)("sign_out_confirm")),1)]),_:1}),i(ie,null,{default:l(()=>[i(T,{secondary:"",onClick:V[1]||(V[1]=q=>s.value=!s.value)},{default:l(()=>[O(U(d(e)("cancel")),1)]),_:1}),i(T,{to:N.value},{default:l(()=>[O(U(d(e)("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),i(Y,{to:m.value},{default:l(()=>[A((a(),h(P,{tile:"",large:"",class:L({"no-avatar":!v.value})},{default:l(()=>[v.value&&!p.value?(a(),x("img",{key:0,src:v.value,alt:d(M),class:"avatar-image",onError:V[4]||(V[4]=q=>p.value=q)},null,40,pt)):(a(),h(W,{key:1,name:"account_circle"}))]),_:1},8,["class"])),[[F,d(M),void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}}});const ft=j(mt,[["__scopeId","data-v-56ca75de"]]),gt={class:"module-bar"},ht={class:"modules"},bt=R({__name:"module-bar",setup(g){const e=Me(),{modules:u}=je(),n=w(()=>u.value.map(o=>o.id)),t=w(()=>e.settings?(e.settings.module_bar??Le).filter(o=>o.type==="link"?!0:o.enabled&&n.value.includes(o.id)).map(o=>{if(o.type==="link"){const s=de.omit(o,["url"]);return o.url.startsWith("/")?s.to=o.url:s.href=o.url,Oe(s)}const c=u.value.find(s=>s.id===o.id);return{...o,...u.value.find(s=>s.id===o.id),to:`/${c.id}`}}):[]);return(o,c)=>{const s=_("v-icon"),v=_("v-button"),p=ne("tooltip");return a(),x("div",gt,[i(_t),B("div",ht,[(a(!0),x(ae,null,se(t.value,m=>A((a(),h(v,{key:m.id,icon:"","x-large":"",to:m.to,href:m.href,tile:""},{default:l(()=>[i(s,{name:m.icon},null,8,["name"])]),_:2},1032,["to","href"])),[[p,m.name,void 0,{right:!0}]])),128))]),i(ft)])}}});const yt=j(bt,[["__scopeId","data-v-572954c3"]]),wt={class:"notification-dialogs"},kt={target:"_blank",href:"https://github.com/directus/directus/issues/new?template=bug_report.yml"},$t=R({__name:"notification-dialogs",setup(g){const{t:e}=le(),u=re(),{isAdmin:n}=we(),t=w(()=>u.dialogs);function o(c){u.remove(c)}return(c,s)=>{const v=_("v-card-title"),p=_("v-error"),m=_("v-card-text"),N=_("v-button"),M=_("v-card-actions"),b=_("v-card"),V=_("v-dialog");return a(),x("div",wt,[(a(!0),x(ae,null,se(t.value,W=>(a(),h(V,{key:W.id,"model-value":"",persist:""},{default:l(()=>[i(b,{class:L([W.type])},{default:l(()=>[i(v,null,{default:l(()=>[O(U(W.title),1)]),_:2},1024),W.text||W.error?(a(),h(m,{key:0},{default:l(()=>[O(U(W.text)+" ",1),W.error?(a(),h(p,{key:0,error:W.error},null,8,["error"])):D("",!0)]),_:2},1024)):D("",!0),i(M,null,{default:l(()=>[W.type==="error"&&d(n)&&W.code==="UNKNOWN"?(a(),h(N,{key:0,secondary:""},{default:l(()=>[B("a",kt,U(d(e)("report_error")),1)]),_:1})):D("",!0),i(N,{onClick:T=>o(W.id)},{default:l(()=>[O(U(d(e)("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}}});const St=j($t,[["__scopeId","data-v-69650eae"]]),xt={key:1,class:"content"},Vt=["onClick"],Wt={key:0,class:"message"},Mt=R({__name:"notifications-drawer",setup(g){const{t:e}=le(),u=ye(),n=we(),t=Re(),{setUnreadCount:o}=re(),c=Ne(),s=$([]),v=$(["inbox"]),p=$([]),m=$(1),N=$(25),M=$(null),b=$({}),V=$(null);oe(v,(S,k)=>{S[0]!==k[0]&&(m.value=1,s.value=[])}),oe([M,b],()=>{m.value=1});function W(S){s.value.includes(S)?s.value.splice(s.value.indexOf(S),1):s.value.push(S)}function T(S){p.value.includes(S)?p.value.splice(p.value.indexOf(S),1):p.value.push(S)}const{notificationsDrawerOpen:E}=_e(u),Q=w(()=>({_and:[{recipient:{_eq:n.currentUser.id}},{status:{_eq:v.value[0]}},b.value]})),{items:ie,loading:J,getItems:X,totalPages:P,getItemCount:Y}=Xe($("directus_notifications"),{filter:Q,fields:$(["id","subject","message","collection","item","timestamp"]),sort:$(["-timestamp"]),search:M,limit:N,page:m}),ee=w(()=>ie.value.map(S=>{var C;let k;if(S.collection){const G=t.getCollection(S.collection);(C=G==null?void 0:G.meta)!=null&&C.singleton||!S.item?k=Ae(S.collection):k=Fe(S.collection,S.item)}else String(S.item).startsWith("/")&&(k=String(S.item));return{...S,to:k}}));async function F(){await Se.patch("/notifications",{query:{recipient:{_eq:n.currentUser.id}},data:{status:"archived"}}),await Y(),await X(),o(0)}async function H(){await Se.patch("/notifications",{keys:s.value,data:{status:v.value[0]==="inbox"?"archived":"inbox"}}),await Y(),await X(),s.value=[]}function q(S){c.push(S),E.value=!1}return(S,k)=>{const C=_("v-icon"),G=_("v-button"),ve=_("v-list-item-icon"),pe=_("v-list-item-content"),ce=_("v-tab"),me=_("v-tabs"),fe=_("v-info"),r=_("v-skeleton-loader"),f=_("v-list"),z=_("v-checkbox"),te=_("v-text-overflow"),ge=_("v-list-item"),I=_("v-pagination"),he=_("v-drawer"),ue=ne("tooltip"),Ie=ne("md");return a(),h(he,{modelValue:d(E),"onUpdate:modelValue":k[5]||(k[5]=y=>tt(E)?E.value=y:null),icon:"notifications",title:d(e)("notifications"),"sidebar-label":d(e)("folders"),onCancel:k[6]||(k[6]=y=>E.value=!1)},{actions:l(()=>[i(qe,{modelValue:M.value,"onUpdate:modelValue":k[0]||(k[0]=y=>M.value=y),filter:b.value,"onUpdate:filter":k[1]||(k[1]=y=>b.value=y),collection:"directus_notifications"},null,8,["modelValue","filter"]),A((a(),h(G,{icon:"",rounded:"",disabled:s.value.length===0,secondary:"",onClick:H},{default:l(()=>[i(C,{name:v.value[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled"])),[[ue,v.value[0]==="inbox"?d(e)("archive"):d(e)("unarchive"),void 0,{bottom:!0}]]),v.value[0]==="inbox"?A((a(),h(G,{key:0,icon:"",rounded:"",disabled:ee.value.length===0,onClick:F},{default:l(()=>[i(C,{name:"done_all"})]),_:1},8,["disabled"])),[[ue,d(e)("archive_all"),void 0,{bottom:!0}]]):D("",!0)]),sidebar:l(()=>[i(me,{modelValue:v.value,"onUpdate:modelValue":k[2]||(k[2]=y=>v.value=y),vertical:""},{default:l(()=>[i(ce,{value:"inbox"},{default:l(()=>[i(ve,null,{default:l(()=>[i(C,{name:"inbox"})]),_:1}),i(pe,null,{default:l(()=>[O(U(d(e)("inbox")),1)]),_:1})]),_:1}),i(ce,{value:"archived"},{default:l(()=>[i(ve,null,{default:l(()=>[i(C,{name:"archive"})]),_:1}),i(pe,null,{default:l(()=>[O(U(d(e)("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:l(()=>[!d(J)&&ee.value.length===0?(a(),h(fe,{key:0,icon:"notifications",title:d(e)("no_notifications"),center:""},{default:l(()=>[O(U(d(e)("no_notifications_copy")),1)]),_:1},8,["title"])):(a(),x("div",xt,[d(J)?(a(),h(f,{key:0,class:"notifications"},{default:l(()=>[(a(),x(ae,null,se(10,y=>i(r,{key:y,class:L({dense:d(P)>1})},null,8,["class"])),64))]),_:1})):(a(),h(f,{key:1,class:"notifications"},{default:l(()=>[(a(!0),x(ae,null,se(ee.value,y=>(a(),h(ge,{key:y.id,block:"",dense:d(P)>1,clickable:!!y.message,onMousedown:k[3]||(k[3]=$e(({target:Z})=>V.value=Z,["left","self"])),onMouseup:$e(({target:Z})=>{Z===V.value&&T(y.id),V.value=null},["left","self"])},{default:l(()=>[B("div",{class:"header",onClick:Z=>T(y.id)},[i(z,{"model-value":s.value.includes(y.id),"onUpdate:modelValue":Z=>W(y.id)},null,8,["model-value","onUpdate:modelValue"]),i(te,{class:"title",highlight:M.value,text:y.subject},null,8,["highlight","text"]),i(ze,{value:y.timestamp,type:"timestamp",relative:""},{default:l(({datetime:Z})=>[i(te,{class:"datetime",text:Z},null,8,["text"])]),_:2},1032,["value"]),y.to?A((a(),h(C,{key:0,clickable:"",name:"open_in_new",onClick:Z=>q(y.to)},null,8,["onClick"])),[[ue,d(e)("goto_collection_content")]]):D("",!0),y.message?(a(),h(C,{key:1,clickable:"",name:p.value.includes(y.id)?"expand_less":"expand_more"},null,8,["name"])):D("",!0)],8,Vt),p.value.includes(y.id)&&y.message?A((a(),x("div",Wt,null,512)),[[Ie,y.message]]):D("",!0)]),_:2},1032,["dense","clickable","onMouseup"]))),128))]),_:1})),d(P)>1?(a(),h(I,{key:2,modelValue:m.value,"onUpdate:modelValue":k[4]||(k[4]=y=>m.value=y),"total-visible":5,length:d(P)},null,8,["modelValue","length"])):D("",!0)]))]),_:1},8,["modelValue","title","sidebar-label"])}}});const Ct=j(Mt,[["__scopeId","data-v-81248a9d"]]),Nt={key:0,class:"icon"},Bt={class:"content"},Dt={class:"title selectable"},It={key:0,class:"text selectable"},Ut=R({__name:"notification-item",props:{id:{},title:{},text:{},icon:{},type:{default:"info"},tail:{type:Boolean},dense:{type:Boolean},showClose:{type:Boolean},loading:{type:Boolean},progress:{}},setup(g){const e=g,u=re();function n(){e.showClose===!0&&u.remove(e.id)}return(t,o)=>{const c=_("v-progress-circular"),s=_("v-icon");return a(),x("div",{class:L(["notification-item",[t.type,{tail:t.tail,dense:t.dense}]]),onClick:n},[t.loading||t.progress||t.icon?(a(),x("div",Nt,[t.loading?(a(),h(c,{key:0,indeterminate:"",small:""})):t.progress?(a(),h(c,{key:1,small:"",value:t.progress},null,8,["value"])):(a(),h(s,{key:2,name:t.icon},null,8,["name"]))])):D("",!0),B("div",Bt,[B("p",Dt,U(t.title),1),t.text?(a(),x("p",It,U(t.text),1)):D("",!0)]),t.showClose?(a(),h(s,{key:1,name:"close",clickable:"",class:"close",onClick:n})):D("",!0)],2)}}});const De=j(Ut,[["__scopeId","data-v-7d21b14f"]]),Tt=R({__name:"notifications-group",props:{sidebarOpen:{type:Boolean}},setup(g){const e=re(),u=ke(e).queue;return(n,t)=>(a(),h(We,{class:L(["notifications-group",{"sidebar-open":n.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:l(()=>[K(n.$slots,"default",{},void 0,!0),(a(!0),x(ae,null,se(d(u),(o,c)=>(a(),h(De,{id:o.id,key:o.id,title:o.title,icon:o.icon,type:o.type,loading:o.loading,progress:o.progress,tail:c===d(u).length-1,dense:n.sidebarOpen===!1,"show-close":o.persist===!0&&o.closeable!==!1},null,8,["id","title","icon","type","loading","progress","tail","dense","show-close"]))),128))]),_:3},8,["class"]))}});const Et=j(Tt,[["__scopeId","data-v-00758c2d"]]),Lt={class:"icon"},Ot={key:0,class:"title"},jt=R({__name:"sidebar-button",props:{to:{},icon:{default:"box"},active:{type:Boolean}},emits:["click"],setup(g){const e=ye(),{sidebarOpen:u}=ke(e);return(n,t)=>{const o=_("v-icon");return a(),h(Be(n.to?"router-link":"button"),{class:L(["sidebar-button",{active:n.active}]),onClick:t[0]||(t[0]=c=>n.$emit("click",c))},{default:l(()=>[B("div",Lt,[i(o,{name:n.icon},null,8,["name"])]),d(u)?(a(),x("div",Ot,[K(n.$slots,"default",{},void 0,!0)])):D("",!0)]),_:3},8,["class"])}}});const Rt=j(jt,[["__scopeId","data-v-3acfa986"]]),At={class:"notifications-preview"},Ft={key:0,class:"inline"},qt={class:"padding-box"},zt=R({__name:"notifications-preview",props:{sidebarOpen:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(g){const{t:e}=le(),u=re(),{lastFour:n}=_e(u);return(t,o)=>{const c=_("router-link"),s=_("transition-expand"),v=ne("tooltip");return a(),x("div",At,[i(s,{tag:"div"},{default:l(()=>[t.modelValue?(a(),x("div",Ft,[B("div",qt,[i(c,{class:L(["link",{"has-items":d(n).length>0}]),to:"/activity"},{default:l(()=>[O(U(d(e)("show_all_activity")),1)]),_:1},8,["class"]),i(We,{tag:"div",name:"notification",class:"transition"},{default:l(()=>[(a(!0),x(ae,null,se(d(n),p=>(a(),h(De,ot({key:p.id},p),null,16))),128))]),_:1})])])):D("",!0)]),_:1}),A((a(),h(Rt,{active:t.modelValue,class:"toggle",icon:"pending_actions",onClick:o[0]||(o[0]=p=>t.$emit("update:modelValue",!t.modelValue))},{default:l(()=>[O(U(d(e)("activity_log")),1)]),_:1},8,["active"])),[[v,!t.sidebarOpen&&d(e)("activity_log"),void 0,{left:!0}]])])}}});const Ht=j(zt,[["__scopeId","data-v-63e60302"]]);function Gt(g){if(typeof g!="number")throw new TypeError("Expected a number");const e=g>0?Math.floor:Math.ceil;return{days:e(g/864e5),hours:e(g/36e5)%24,minutes:e(g/6e4)%60,seconds:e(g/1e3)%60,milliseconds:e(g)%1e3,microseconds:e(g*1e3)%1e3,nanoseconds:e(g*1e6)%1e3}}const Pt=(g,e)=>e===1?g:`${g}s`,Zt=1e-7;function be(g,e={}){if(!Number.isFinite(g))throw new TypeError("Expected a finite number");e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);const u=[],n=(c,s)=>{const v=Math.floor(c*10**s+Zt);return(Math.round(v)/10**s).toFixed(s)},t=(c,s,v,p)=>{if((u.length===0||!e.colonNotation)&&c===0&&!(e.colonNotation&&v==="m"))return;p=(p||c||"0").toString();let m,N;if(e.colonNotation){m=u.length>0?":":"",N="";const M=p.includes(".")?p.split(".")[0].length:p.length,b=u.length>0?2:1;p="0".repeat(Math.max(0,b-M))+p}else m="",N=e.verbose?" "+Pt(s,c):v;u.push(m+p+N)},o=Gt(g);if(t(Math.trunc(o.days/365),"year","y"),t(o.days%365,"day","d"),t(o.hours,"hour","h"),t(o.minutes,"minute","m"),e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&g<1e3)if(t(o.seconds,"second","s"),e.formatSubMilliseconds)t(o.milliseconds,"millisecond","ms"),t(o.microseconds,"microsecond","µs"),t(o.nanoseconds,"nanosecond","ns");else{const c=o.milliseconds+o.microseconds/1e3+o.nanoseconds/1e6,s=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,v=c>=1?Math.round(c):Math.ceil(c),p=s?c.toFixed(s):v;t(Number.parseFloat(p),"millisecond","ms",p)}else{const c=g/1e3%60,s=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,v=n(c,s),p=e.keepDecimalsOnWholeSeconds?v:v.replace(/\.0+$/,"");t(Number.parseFloat(p),"second","s",p)}if(u.length===0)return"0"+(e.verbose?" milliseconds":"ms");if(e.compact)return u[0];if(typeof e.unitCount=="number"){const c=e.colonNotation?"":" ";return u.slice(0,Math.max(e.unitCount,1)).join(c)}return e.colonNotation?u.join(""):u.join(" ")}const Kt={class:"latency-indicator"},Qt=R({__name:"latency-indicator",setup(g){const{t:e}=le(),u=He(),n=w(()=>{const v=de.sortBy(u.latency,["timestamp"]);return v[v.length-1]}),t=w(()=>{if(!u.latency||u.latency.length===0)return 0;const v=de.sortBy(u.latency,["timestamp"]),p=v.slice(Math.max(v.length-5,0));let m=0;for(const{latency:N}of p)m+=N;return Math.round(m/p.length)}),o=w(()=>t.value<=250?4:t.value>250&&t.value<=500?3:t.value>500&&t.value<=750?2:1),c=w(()=>{switch(o.value){case 4:return`${e("connection_excellent")}
(${be(t.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${be(t.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${be(t.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${be(t.value)} ${e("latency")})`;default:return null}}),s=w(()=>{switch(o.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}});return(v,p)=>{const m=_("v-progress-circular"),N=_("v-icon"),M=ne("tooltip");return A((a(),x("div",Kt,[n.value?(a(),h(N,{key:1,name:s.value},null,8,["name"])):(a(),h(m,{key:0,indeterminate:""}))])),[[M,c.value,void 0,{bottom:!0,end:!0}]])}}});const Jt=j(Qt,[["__scopeId","data-v-93933dfa"]]),Xt={class:"project-info"},Yt={class:"name-container"},eo=R({__name:"project-info",setup(g){const e=Ge(),u=w(()=>{var t,o;return(o=(t=e.info)==null?void 0:t.project)==null?void 0:o.project_name}),n=w(()=>{var t,o;return(o=(t=e.info)==null?void 0:t.project)==null?void 0:o.project_descriptor});return(t,o)=>{const c=_("v-text-overflow");return a(),x("div",Xt,[i(Jt),B("div",Yt,[i(c,{placement:"right",class:"name",text:u.value},null,8,["text"]),n.value?(a(),h(c,{key:0,placement:"right",class:"descriptor",text:n.value},null,8,["text"])):D("",!0)])])}}});const to=j(eo,[["__scopeId","data-v-142557c9"]]),oo=R({__name:"sidebar-detail-group",props:{sidebarOpen:{type:Boolean}},setup(g){const e=g,u=$([]),n=$(!1);return oe(()=>e.sidebarOpen,async t=>{t===!1?u.value=[]:(n.value=!0,await nt(),n.value=!1)}),(t,o)=>{const c=_("v-item-group");return a(),h(c,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:n.value},{default:l(()=>[K(t.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}}});const no=j(oo,[["__scopeId","data-v-d961026b"]]),ao=g=>(rt("data-v-e89b79df"),g=g(),ct(),g),so={class:"module-nav alt-colors"},lo={class:"module-nav-content"},io={class:"content-wrapper"},ro={class:"flex-container"},co=ao(()=>B("div",{class:"spacer"},null,-1)),uo=R({__name:"private-view",props:{title:{},smallHeader:{type:Boolean},headerShadow:{type:Boolean,default:!0},splitView:{type:Boolean},splitViewMinWidth:{default:0},sidebarShadow:{type:Boolean}},emits:["update:splitView"],setup(g,{emit:e}){var me,fe;const u=g,n={moduleBarWidth:60,minModuleNavWidth:220,minContentWidth:590,collapsedSidebarWidth:60,overlaySpace:60},{t}=le(),o=Ne(),c=w(()=>u.title??null),s=Ye(u,"splitView",e),v=$(),p=$(),m=$();let N;const M=()=>{var r;clearTimeout(N),(r=v.value)==null||r.classList.remove("hide-overflow-x")};oe(s,()=>{if(!v.value||!p.value)return;v.value.classList.add("hide-overflow-x","hide-overflow-y"),N=setTimeout(M,1500);let r,f;const z=()=>{var te;clearTimeout(r),f==null||f(),(te=v.value)==null||te.classList.remove("hide-overflow-y")};r=setTimeout(z,1500),f=Pe(p.value,"transitionend",z)});const{width:b}=Ze(),{width:V}=et(m),W=w(()=>{if(!s.value)return!0;let r;return b.value>=1260?r=b.value-n.moduleBarWidth-n.minModuleNavWidth-n.minContentWidth-V.value:b.value>=960?r=b.value-n.moduleBarWidth-n.minModuleNavWidth-n.minContentWidth-n.collapsedSidebarWidth:r=b.value-n.minContentWidth,r>=u.splitViewMinWidth}),{data:T}=Ke("module-width",{}),E=$(ce((me=T.value)==null?void 0:me.nav,n.minModuleNavWidth));oe(E,de.debounce(r=>{T.value={...T.value??{},nav:r}},300));const Q=$(ce((fe=T.value)==null?void 0:fe.main,n.minContentWidth));oe(Q,de.debounce(r=>{T.value={...T.value??{},main:r}},300));const ie=$(!1),J=w(()=>{const r=s.value?u.splitViewMinWidth:0,f=W.value?n.minContentWidth+r:n.minContentWidth;let z;return b.value>=1260?z=b.value-n.moduleBarWidth-f-V.value:b.value>=960?z=b.value-n.moduleBarWidth-f-n.collapsedSidebarWidth:z=b.value-n.moduleBarWidth+n.overlaySpace,Math.max(z,n.minModuleNavWidth)}),X=w(()=>{const r=s.value?u.splitViewMinWidth:0;let f;return b.value>=1260?f=b.value-n.moduleBarWidth-E.value-r-V.value:b.value>=960?f=b.value-n.moduleBarWidth-E.value-r-n.collapsedSidebarWidth:f=b.value-r,Math.max(f,n.minContentWidth)}),P=w(()=>({snapZones:[{width:40,snapPos:n.minModuleNavWidth,direction:"left"},{width:40,snapPos:J.value,direction:"right"}]})),Y=$(!1),ee=w(()=>({snapZones:[{width:40,snapPos:n.minContentWidth,direction:"left"},{width:40,snapPos:X.value,direction:"right"}],alwaysShowHandle:!0,disableTransition:ie.value})),F=$(!1),H=we(),q=ye(),S=w(()=>{var r,f;return H.currentUser?((f=(r=H.currentUser)==null?void 0:r.role)==null?void 0:f.app_access)||!1:!0}),k=$(!1),{sidebarOpen:C,fullScreen:G}=_e(q),ve=w(()=>H.currentUser&&"appearance"in H.currentUser?H.currentUser.appearance:"auto");at("main-element",v),o.afterEach(()=>{var r;(r=v.value)==null||r.scrollTo({top:0}),G.value=!1}),Qe({title:c});function pe(r){r.target&&r.target.classList.contains("close")===!1&&(C.value=!0)}function ce(r,f){return r&&!Number.isNaN(r)?Number(r):f}return(r,f)=>{const z=_("v-button"),te=_("v-info"),ge=_("v-overlay");return S.value===!1?(a(),h(te,{key:0,center:"",title:d(t)("no_app_access"),type:"danger",icon:"block"},{append:l(()=>[i(z,{to:"/logout"},{default:l(()=>[O(U(d(t)("switch_user")),1)]),_:1})]),default:l(()=>[O(U(d(t)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(a(),x("div",{key:1,class:L(["private-view",{appearance:ve.value,"full-screen":d(G),splitView:r.splitView}])},[B("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:L({"is-open":F.value,"has-shadow":r.sidebarShadow})},[i(yt),i(xe,{width:E.value,"onUpdate:width":f[0]||(f[0]=I=>E.value=I),"min-width":n.minModuleNavWidth,"max-width":J.value,options:P.value,onDragging:f[1]||(f[1]=I=>ie.value=I),onTransitionEnd:M},{default:l(()=>[B("div",so,[i(to),B("div",lo,[K(r.$slots,"navigation",{},void 0,!0)])])]),_:3},8,["width","min-width","max-width","options"])],2),B("div",{id:"main-content",ref_key:"contentEl",ref:v,class:"content"},[i(Je,{ref_key:"headerBarEl",ref:p,small:r.smallHeader||r.splitView,shadow:r.headerShadow||r.splitView,"show-sidebar-toggle":"",title:r.title,"onToggle:sidebar":f[2]||(f[2]=I=>C.value=!d(C)),onPrimary:f[3]||(f[3]=I=>F.value=!F.value)},st({_:2},[se(r.$slots,(I,he)=>({name:he,fn:l(ue=>[K(r.$slots,he,lt(it(ue)),void 0,!0)])}))]),1032,["small","shadow","title"]),B("div",io,[i(xe,{width:Q.value,"onUpdate:width":f[4]||(f[4]=I=>Q.value=I),"min-width":n.minContentWidth,"max-width":X.value,disabled:!d(s),options:ee.value,onDragging:f[5]||(f[5]=I=>Y.value=I)},{default:l(()=>[A(B("main",null,[K(r.$slots,"default",{},void 0,!0)],512),[[Ue,W.value]])]),_:3},8,["width","min-width","max-width","disabled","options"]),r.splitView?(a(),x("div",{key:0,id:"split-content",class:L({"is-dragging":Y.value})},[K(r.$slots,"splitView",{},void 0,!0)],2)):D("",!0)])],512),B("aside",{id:"sidebar",ref_key:"sidebarEl",ref:m,role:"contentinfo",class:L(["alt-colors",{"is-open":d(C),"has-shadow":r.sidebarShadow}]),"aria-label":"Module Sidebar",onClick:pe},[B("div",ro,[i(no,{"sidebar-open":d(C)},{default:l(()=>[K(r.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),co,i(Ht,{modelValue:k.value,"onUpdate:modelValue":f[6]||(f[6]=I=>k.value=I),"sidebar-open":d(C)},null,8,["modelValue","sidebar-open"])])],2),i(ge,{class:"nav-overlay",active:F.value,onClick:f[7]||(f[7]=I=>F.value=!1)},null,8,["active"]),i(ge,{class:"sidebar-overlay",active:d(C),onClick:f[8]||(f[8]=I=>C.value=!1)},null,8,["active"]),i(Ct),k.value===!1?(a(),h(Et,{key:0,"sidebar-open":d(C)},null,8,["sidebar-open"])):D("",!0),i(St)],2))}}});const bo=j(uo,[["__scopeId","data-v-e89b79df"]]);export{bo as PrivateView,bo as default};
